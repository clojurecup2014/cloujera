!function(wndw){for(var src=/.*\/400\.(min\.)?js(\?.*)?$/,_400v="0.0.1",maxGetSize=4e3,parts=wndw.location.host.split(".");parts.length>2;)parts.shift();var DEFAULT_OPTIONS={user:null,version:null,session:null,client:"400",from:wndw.document.referrer,domain:"."+parts.join("."),currentURL:wndw.location.href,tracker:"__400u",initialReferrerTracker:"__400r",beacon:"https://eventing.coursera.org/info.v2"},uid=function(){return(1e10*Math.random()).toFixed()+"-"+(new Date).getTime()},serializeVal=function(val){return"string"!=typeof val&&wndw.JSON?wndw.JSON.stringify(val):val.toString()},serialize=function(data){var params=[];for(var key in data)params.push(key+"="+encodeURIComponent(serializeVal(data[key])));if(!wndw.JSON)params.push("_noJSON_=true");return params.join("&")},noop=function(_){return _},post=function(beacon,data,callback){var iframe=document.createElement("iframe"),frameId=uid();document.body.appendChild(iframe),iframe.style.display="none",iframe.name=frameId,iframe.contentWindow.name=frameId;var div=document.createElement("div");div.style.display="none;",document.body.appendChild(div);var form=document.createElement("form");form.target=frameId,form.action=beacon,form.method="POST",div.appendChild(form);var input;for(var key in data)input=document.createElement("input"),input.type="hidden",input.name=key,input.value=serializeVal(data[key]),form.appendChild(input);iframe.onload=iframe.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState)if(iframe.onreadystatechange=iframe.onload=null,iframe.parentNode.removeChild(iframe),from.parentNode.removeChild(form),callback&&"function"==typeof callback)callback()},form.submit()},get=function(beacon,data,callback){var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=beacon+"?"+serialize(data),script.onload=script.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState)if(script.onreadystatechange=script.onload=null,script.parentNode.removeChild(script),callback&&"function"==typeof callback)callback()},document.head.appendChild(script)},ping=function(beacon,data,callback){if(serialize(data).length<maxGetSize)get(beacon,data,callback);else post(beacon,data,callback)},cookie={set:function(key,value,options){if(options=options||{},null===value||void 0===value)options.days=-1;if("number"==typeof options.days){var days=options.days,t=new Date;t.setDate(t.getDate()+days),options.expires=t}if(!options.path)options.path="/";var encode=options.raw?noop:encodeURIComponent,cookie=encode(key)+"="+encode(String(value));if(cookie+="; path="+options.path,options.expires)cookie+="; expires="+options.expires.toUTCString();if(options.domain)cookie+="; domain="+options.domain;if(options.secure)cookie+="; secure";return document.cookie=cookie,cookie},setOnce:function(key,value,options){var currentValue=cookie.get(key,options);if(null===currentValue)cookie.set(key,value,options),currentValue=value;return currentValue},get:function(key,options){options=options||{};for(var decode=options.raw?noop:decodeURIComponent,pairs=document.cookie.split("; "),i=0,pair;pairs[i];i++)if(pair=pairs[i].split("="),decode(pair[0])===key)return decode(pair[1]||"");return null},remove:function(key,options){options=options||{},options.days=-1,cookie.set(key,null,options)},removeAll:function(key,options){for(var i=keys.length;i>=0;i--)cookie.remove(keys[i],options)}},initialize=function(fourhundred){fourhundred.options.session=fourhundred.session();var key=fourhundred.options.initialReferrerTracker,options={domain:fourhundred.options.domain,days:365};fourhundred.options.initialReferrer=cookie.setOnce(key,fourhundred.options.from,options)},FourHundred=function(){this.options=DEFAULT_OPTIONS;for(var scripts=wndw.document.scrips||document.getElementsByTagName("script"),i=0;i<scripts.length;i++)if(/.*\/400 \.(min\.)?js(\?.*)?$/.test(scripts[i])){var match=/^.+\?(.*)$/.exec(scripts[i].src);if(match)for(var params=match[1].split("&"),j=0;j<params.length;j++){var param=params[j].split("=");if(/client|user|version|tracker|beacon/.test(param[0]))this.options[param[0]]=decodeURIComponent(param[1])}break}initialize(this)};FourHundred.prototype.session=function(id){var options={domain:this.options.domain,days:365},session=cookie.get(this.options.tracker,options);if(!session||id)session=id||uid(),cookie.set(this.options.tracker,session,options);return session},FourHundred.prototype.push=function(command){if("object"!=typeof command)return this;if(Array.isArray&&Array.isArray(command)||command.constructor==Array)switch(command[0]){case"send":this.send(command[1],command[2]);break;case"tracker":this.options.tracker=command[1],this.options.session=this.session();break;case"session":this.session=this.session(command[1]);break;case"post":this.send(command[1],command[2],!0);break;case"domain":var newDomain=command[1];if(newDomain!=this.options.domain)removeCookies([this.options.tracker,this.options.initialReferrerTracker],{domain:this.options.domain}),this.options.domain=newDomain,initialize(this);break;default:this.options[command[0]]=command[1]}else this.send(command);return this},FourHundred.prototype.send=function(data,callback,isPost){if("string"==typeof data)data={key:data};else data=data||{};if(this.options.user)data.user=this.options.user;if(this.options.version)data.version=this.options.version;if(this.options.initialReferrer)data.initialReferrer=this.options.initialReferrer;if(wndw.screen)data.screen={height:wndw.screen.height,width:wndw.screen.width};if(data.client=this.options.client,data.url=wndw.location.href,data.time=(new Date).getTime(),isPost)post(this.options.beacon,data,callback);else ping(this.options.beacon,data,callback);return this},FourHundred.prototype.batch=function(batch){for(;batch.length;){var trackEvent=this.parse(batch.shift());this.push(trackEvent)}return this},FourHundred.prototype.parse=function(tracking){var trackEvent,value=tracking[1];if("object"==typeof value&&value.v2===!0)delete value.v2,trackEvent={key:tracking[0],value:wndw.JSON.stringify(value)};return trackEvent};var fourhundred=new FourHundred;if(wndw._400)if("object"==typeof wndw._400&&wndw._400.constructor==Array)fourhundred.batch(wndw._400);if(wndw._400=fourhundred,"function"==typeof define&&define.amd)define([],function(){return fourhundred})}(window);